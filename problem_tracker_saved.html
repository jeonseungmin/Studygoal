<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ë¬¸ì œì§€ ì§„í–‰ë¥  íŠ¸ë˜ì»¤</title>
<style>
  body { font-family: sans-serif; margin: 40px; background: #f4f4f4; }
  h1 { text-align: center; }
  .sheet { background: white; padding: 15px; margin-bottom: 15px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
  .bar { height: 20px; background: #ddd; border-radius: 5px; overflow: hidden; }
  .fill { height: 100%; background: #4CAF50; width: 0%; transition: width 0.3s; }
  button { margin-top: 10px; }
</style>
</head>
<body>

<h1>ğŸ“˜ ë¬¸ì œì§€ ì§„í–‰ë¥  íŠ¸ë˜ì»¤</h1>

<div>
  <input id="sheetName" placeholder="ë¬¸ì œì§€ ì´ë¦„" />
  <input id="total" type="number" placeholder="ì „ì²´ ë¬¸ì œ ìˆ˜" min="1" />
  <button onclick="addSheet()">ë¬¸ì œì§€ ì¶”ê°€</button>
</div>

<div id="sheets"></div>

<script>
let sheets = JSON.parse(localStorage.getItem("sheets") || "{}");

function saveData() {
  localStorage.setItem("sheets", JSON.stringify(sheets));
}

function render() {
  const container = document.getElementById("sheets");
  container.innerHTML = "";
  for (let name in sheets) {
    const sheet = sheets[name];
    const percent = Math.min((sheet.done / sheet.total) * 100, 100).toFixed(1);
    container.innerHTML += `
      <div class="sheet">
        <h3>${name}</h3>
        <p>${sheet.done} / ${sheet.total} ë¬¸ì œ (${percent}%)</p>
        <div class="bar"><div class="fill" style="width:${percent}%;"></div></div>
        <input type="number" id="input-${name}" placeholder="í’€ ë¬¸ì œ ê°œìˆ˜ ì…ë ¥" min="1" />
        <button onclick="addProgress('${name}')">ì§„í–‰ ì¶”ê°€</button>
        <button onclick="deleteSheet('${name}')">ì‚­ì œ</button>
      </div>
    `;
  }
}

function addSheet() {
  const name = document.getElementById("sheetName").value.trim();
  const total = parseInt(document.getElementById("total").value);
  if (!name || !total) {
    alert("ë¬¸ì œì§€ ì´ë¦„ê³¼ ì „ì²´ ë¬¸ì œ ìˆ˜ë¥¼ ì…ë ¥í•˜ì„¸ìš”.");
    return;
  }
  if (sheets[name]) {
    alert("ì´ë¯¸ ìˆëŠ” ë¬¸ì œì§€ì…ë‹ˆë‹¤!");
    return;
  }
  sheets[name] = { done: 0, total: total };
  saveData();
  render();
  document.getElementById("sheetName").value = "";
  document.getElementById("total").value = "";
}

function addProgress(name) {
  const input = document.getElementById(`input-${name}`);
  const add = parseInt(input.value);
  if (!add || add < 1) return;
  sheets[name].done = Math.min(sheets[name].done + add, sheets[name].total);
  saveData();
  render();
}

function deleteSheet(name) {
  if (confirm(`${name} ë¬¸ì œì§€ë¥¼ ì‚­ì œí• ê¹Œìš”?`)) {
    delete sheets[name];
    saveData();
    render();
  }
}

render();
</script>
</body>
</html>